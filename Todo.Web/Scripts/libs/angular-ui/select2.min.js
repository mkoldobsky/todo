angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(e,t){var i={};return e&&angular.extend(i,e),{require:"ngModel",compile:function(e,n){var l,a,u,r=e.is("select"),c=angular.isDefined(n.multiple);return e.is("select")&&(a=e.find("option[ng-repeat], option[data-ng-repeat]"),a.length&&(u=a.attr("ng-repeat")||a.attr("data-ng-repeat"),l=jQuery.trim(u.split("|")[0]).split(" ").pop())),function(e,a,u,s){var o=angular.extend({},i,e.$eval(u.uiSelect2)),d=function(e){var t;return o.simple_tags?(t=[],angular.forEach(e,function(e){t.push(e.id)})):t=e,t},g=function(e){var t=[];return e?(o.simple_tags?(t=[],angular.forEach(e,function(e){t.push({id:e,text:e})})):t=e,t):t};if(r?(delete o.multiple,delete o.initSelection):c&&(o.multiple=!0),s&&(e.$watch(n.ngModel,function(e,t){e&&e!==t&&s.$render()},!0),s.$render=function(){r?a.select2("val",s.$viewValue):o.multiple?a.select2("data",g(s.$viewValue)):angular.isObject(s.$viewValue)?a.select2("data",s.$viewValue):s.$viewValue?a.select2("val",s.$viewValue):a.select2("data",null)},l&&e.$watch(l,function(e){e&&t(function(){a.select2("val",s.$viewValue),a.trigger("change")})}),s.$parsers.push(function(e){var t=a.prev();return t.toggleClass("ng-invalid",!s.$valid).toggleClass("ng-valid",s.$valid).toggleClass("ng-invalid-required",!s.$valid).toggleClass("ng-valid-required",s.$valid).toggleClass("ng-dirty",s.$dirty).toggleClass("ng-pristine",s.$pristine),e}),!r&&(a.bind("change",function(){e.$$phase||e.$apply(function(){s.$setViewValue(d(a.select2("data")))})}),o.initSelection))){var v=o.initSelection;o.initSelection=function(e,t){v(e,function(e){s.$setViewValue(d(e)),t(e)})}}a.bind("$destroy",function(){a.select2("destroy")}),u.$observe("disabled",function(e){a.select2("enable",!e)}),u.$observe("readonly",function(e){a.select2("readonly",!!e)}),u.ngMultiple&&e.$watch(u.ngMultiple,function(){a.select2(o)}),t(function(){a.select2(o),a.val(s.$viewValue),s.$render(),o.initSelection||r||s.$setViewValue(d(a.select2("data")))})}}}}]);